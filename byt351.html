<!DOCTYPE html>
<html lang="vi">
<head>
          <title>Tin tức Python PyMI.vn</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8" />
        <link href="https://n.pymi.vn/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Tin tức Python PyMI.vn Full Atom Feed" />
        <!-- twitter card metadata -->
<meta name="twitter:site" content="">
<meta name="twitter:title" content="[hack] Biến đổi giữa các kiểu số thành&nbsp;byte">
<meta name="twitter:description" content="Hacker 101 - bài học vỡ mộng để trở thành h4x0r">
        <!-- OG Tags -->
<meta property="og:url" content="./byt351.html"/>
<meta property="og:title" content="[hack] Biến đổi giữa các kiểu số thành&nbsp;byte | Tin tức Python PyMI.vn" />
<meta property="og:description" content="Hacker 101 - bài học vỡ mộng để trở thành h4x0r" />
        <!-- favicon -->
        <!-- moment.js for date formatting -->
        <script src="./theme/js/moment.js"></script>
        <!-- css -->
        <link rel="stylesheet" type="text/css" href="./theme/css/main.css" />
		<script>
			
                /*! grunt-grunticon Stylesheet Loader - v2.1.2 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
    
    (function(e){function t(t,n,r,o){"use strict";function a(){for(var e,n=0;u.length>n;n++)u[n].href&&u[n].href.indexOf(t)>-1&&(e=!0);e?i.media=r||"all":setTimeout(a)}var i=e.document.createElement("link"),l=n||e.document.getElementsByTagName("script")[0],u=e.document.styleSheets;return i.rel="stylesheet",i.href=t,i.media="only x",i.onload=o||null,l.parentNode.insertBefore(i,l),a(),i}var n=function(r,o){"use strict";if(r&&3===r.length){var a=e.navigator,i=e.Image,l=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||e.opera&&-1===a.userAgent.indexOf("Chrome")||-1!==a.userAgent.indexOf("Series40")),u=new i;u.onerror=function(){n.method="png",n.href=r[2],t(r[2])},u.onload=function(){var e=1===u.width&&1===u.height,a=r[e&&l?0:e?1:2];n.method=e&&l?"svg":e?"datapng":"png",n.href=a,t(a,null,null,o)},u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",document.documentElement.className+=" grunticon"}};n.loadCSS=t,e.grunticon=n})(this);(function(e,t){"use strict";var n=t.document,r="grunticon:",o=function(e){if(n.attachEvent?"complete"===n.readyState:"loading"!==n.readyState)e();else{var t=!1;n.addEventListener("readystatechange",function(){t||(t=!0,e())},!1)}},a=function(e){return t.document.querySelector('link[href$="'+e+'"]')},c=function(e){var t,n,o,a,c,i,u={};if(t=e.sheet,!t)return u;n=t.cssRules?t.cssRules:t.rules;for(var l=0;n.length>l;l++)o=n[l].cssText,a=r+n[l].selectorText,c=o.split(");")[0].match(/US\-ASCII\,([^"']+)/),c&&c[1]&&(i=decodeURIComponent(c[1]),u[a]=i);return u},i=function(e){var t,o,a;o="data-grunticon-embed";for(var c in e)if(a=c.slice(r.length),t=n.querySelectorAll(a+"["+o+"]"),t.length)for(var i=0;t.length>i;i++)t[i].innerHTML=e[c],t[i].style.backgroundImage="none",t[i].removeAttribute(o);return t},u=function(t){"svg"===e.method&&o(function(){i(c(a(e.href))),"function"==typeof t&&t()})};e.embedIcons=i,e.getCSS=a,e.getIcons=c,e.ready=o,e.svgLoadedCallback=u,e.embedSVG=u})(grunticon,this);
                
                grunticon(["./theme/css/icons.data.svg.css", "./theme/css/icons.data.png.css", "./theme/css/icons.fallback.css"]);
            </script>
        <noscript><link href="./theme/css/icons.fallback.css" rel="stylesheet"></noscript>
        <!-- menu toggle javascript -->
        <script type="text/javascript">
            document.addEventListener("DOMContentLoaded", initMenu);
            
            function initMenu(){
                var menu = document.getElementById("menu");
                var menulink = document.getElementById("menu-link");
                menulink.addEventListener("click", function toggleMenu(){
                        window.event.preventDefault();
                        menulink.classList.toggle('active');
                        menu.classList.toggle('active');              
                    });
            };
        </script>

    <meta name="description" content="Hacker 101 - bài học vỡ mộng để trở thành h4x0r" />

    <meta name="tags" content="hack" />
    <meta name="tags" content="binary" />
    <meta name="tags" content="byte" />
    <meta name="tags" content="hex" />

</head>
<body>
    <div role="banner" id="masthead">
        <header>
            <h1><a href="/">Pymiers's Blog</a></h1>
            <a href="#menu" id="menu-link">more stuff</a>
            <nav id="menu">
                <ul>
                            <li><a href="./category/features.html">features</a></li>
                            <li class="active"><a href="./category/news.html">news</a></li>
                            <li><a href="./category/pymivn.html">pymi.vn</a></li>
                </ul>
            </nav>
        </header>
    </div>
        <div class="page" role="main">
  <div class="article" role="article">
    <article>
        <footer>
            <a name="top"></a>
            <p>
              <time datetime=" 2022-07-19 00:00:00+07:00">
                <script>document.write(moment('2022-07-19 00:00:00+07:00').format('LL'));</script>
              </time>
            </p>
        </footer>
        <header>
          <h2>
            [hack] Biến đổi giữa các kiểu số thành&nbsp;byte
          </h2>
        </header>
      <div class="content">
         <p><img alt="img" src="https://images.unsplash.com/photo-1577507801612-5e6e0200774f?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwyMzI1MzN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NTgyMzcwMDA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600"></p>
<p>Hệ thập phân (hệ số 10) là hệ số dùng phổ biến nhất ở loài người, 1,2,3,4,5,6,7,8,9&#8230;0 đều học
từ lớp 1 2&nbsp;3.</p>
<p>Máy tính biểu diễn mọi thứ ở hệ nhị phân (hệ số 2) với số 0 và 1, gọi là&nbsp;binary.</p>
<p>Trên máy tính còn dùng các hệ khác như octal, hex và chúng đều có thể biểu diễn
chung ở 1 dạng gọi là&nbsp;byte.</p>
<h3>bit</h3>
<p>bit là đơn vị nhỏ nhất trên máy tính, bit có thể có 2 giá trị 0 và 1. Số khi
biểu diễn ở dạng bit viết thành binary:&nbsp;10010101011</p>
<p>Trên Python, có thể viết 0b rồi gõ giá trị, ví dụ: 0b101010 là dạng binary của số&nbsp;42.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mb">0b101010</span> <span class="o">==</span> <span class="mi">42</span>
<span class="kc">True</span>
</code></pre></div>

<p>Có thể biến 42 thành str (string) biểu diễn dạng binary với function&nbsp;bin:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">bin</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="s1">&#39;0b101010&#39;</span>
</code></pre></div>

<p>Và biến ngược lại từ str thành số&nbsp;10:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;101010&#39;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">42</span>
</code></pre></div>

<h3>byte</h3>
<p>Vì bit quá nhỏ, để viết được số 255 cần tới 8 bit: 11111111 rất dài dòng và
tốn giấy mực, nên người ta đổi 8 bits thành 1 byte. 1 byte có thể biểu diễn
bất kỳ giá trị trong khoảng 0-255 (2 mũ&nbsp;8).</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">254</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="mi">8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span><span class="p">)</span>
<span class="sa">b</span><span class="s1">&#39;</span><span class="se">\xfe</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
<span class="sa">b</span><span class="s1">&#39;</span><span class="se">\xfe</span><span class="s1">&#39;</span>
</code></pre></div>

<p>bytes là kiểu dữ liệu trên python để biểu diễn các&#8230; byte. bytes được ký hiệu bằng chữ
b trước nội dung tương tự kiểu&nbsp;string.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="sa">b</span><span class="s1">&#39;python&#39;</span>
<span class="sa">b</span><span class="s1">&#39;python&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;python&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">bytes</span><span class="s1">&#39;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="sa">b</span><span class="s1">&#39;python&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">112</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">110</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;python&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">112</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">110</span><span class="p">]</span>
</code></pre></div>

<p>Khi duyệt qua từng byte, chúng là các giá trị số&nbsp;int.</p>
<p>Khi in ra, các giá trị không có dạng ký tự biểu diễu như 0 1 2 hay a b c ?&lt;&gt;.,+ &#8230;
sẽ được biễu diễn bằng ký hiệu b&#8217;\x1f` với 1f là dạng hex của byte&nbsp;này.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span>
<span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f</span><span class="s1"> !&quot;#$%&amp;</span><span class="se">\&#39;</span><span class="s1">()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[</span><span class="se">\\</span><span class="s1">]^_`abcdefghijklmnopqrstuvwxyz{|}~</span><span class="se">\x7f\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8a\x8b\x8c\x8d\x8e\x8f\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9a\x9b\x9c\x9d\x9e\x9f\xa0\xa1\xa2\xa3\xa4\xa5\xa6\xa7\xa8\xa9\xaa\xab\xac\xad\xae\xaf\xb0\xb1\xb2\xb3\xb4\xb5\xb6\xb7\xb8\xb9\xba\xbb\xbc\xbd\xbe\xbf\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff</span><span class="s1">&#39;</span>
</code></pre></div>

<h3>hex</h3>
<p>byte là đơn vị máy tính sử dụng, thì hex là giá trị
con người sử dụng, để dễ dàng biểu diễn byte.
Hex là hệ gồm 16 số 0123456789abcdef, với a = 10, b = 11,&#8230; f = 15.
Có thể thấy một sự trùng hợp không hề ngẫu&nbsp;nhiên:</p>
<ul>
<li>256 == 2 mũ&nbsp;8</li>
<li>16 == 2 mũ&nbsp;4</li>
<li>Các giá trị từ 0 đến 255 có thể biểu diễn ở dạng hex với 2 ký&nbsp;tự.</li>
</ul>
<p>Trên&nbsp;Python:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mh">0xfe</span> <span class="o">==</span> <span class="mi">254</span>
<span class="kc">True</span>
</code></pre></div>

<p>Đổi từ số sang hex string, và ngược&nbsp;lại:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; hex(254)
&#39;0xfe&#39;
&gt;&gt;&gt; int(&#39;fe&#39;, base=16)
254
</code></pre></div>

<h3>đổi byte sang&nbsp;hex</h3>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; x = b&#39;python&#39;
&gt;&gt;&gt; x.hex()
&#39;707974686f6e&#39;
&gt;&gt;&gt; bytes.fromhex(&#39;707974686f6e&#39;)
b&#39;python&#39;
</code></pre></div>

<p>Giải 1 bài trong giải <span class="caps">CTF</span> <a href="https://ctftime.org/event/1670">imaginaryctf 2022</a>:</p>
<p>Đoạn ký tự này mã hóa cái&nbsp;gì?</p>
<div class="highlight"><pre><span></span><code><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;👎👍👍👎👍👎👎👍👎👍👍👎👎👎👍👍👎👍👍👍👎👍👎👎👎👍👍👎👎👍👍👎👎👍👍👍👍👎👍👍👎👍👍👎👎👍👎👍👎👍👍👎👍👍👍👎👎👍👍👎👎👎👍👍👎👎👍👍👎👎👎👎👎👍👍👎👎👍👎👎👎👍👍👎👍👎👎👍👎👍👍👎👍👍👍👎👎👍👍👎👎👍👍👍👎👍👎👍👍👍👍👍👎👍👍👎👍👎👎👍👎👍👍👍👎👎👍👍👎👍👎👍👍👍👍👍👎👍👍👎👍👍👍👎👎👎👍👍👎👎👎👎👎👍👍👍👎👍👎👎👎👍👎👍👍👍👍👍👎👍👍👎👎👍👎👍👎👍👍👎👍👍👍👎👎👍👍👎👎👎👍👍👎👍👍👍👎👎👍👎👎👍👍👍👍👎👎👍👎👍👍👍👎👎👎👎👎👍👍👍👎👍👎👎👎👍👍👎👍👎👎👍👎👎👍👍👎👎👎👎👎👍👍👎👍👍👍👎👎👍👎👍👍👍👍👍👎👎👍👍👎👎👎👍👎👍👍👎👎👎👍👎👎👎👍👍👎👎👍👎👎👍👍👎👎👍👎👍👎👎👍👍👎👎👎👎👎👍👍👎👎👍👎👎👎👎👍👍👎👍👎👎👎👎👍👍👎👎👍👍👎👍👍👍👍👍👎👍&#39;</span>
</code></pre></div>

<p>Đoán 1 chút, dấu 👎 đại diện cho số 0, dấu 👍 đại diện cho số 1,
biến thành string 0, 1 rồi đổi thành số hệ 10, sau đó đổi sang hex, và biến thành&nbsp;bytes:</p>
<div class="highlight"><pre><span></span><code><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s1">&#39;👍&#39;</span> <span class="k">else</span> <span class="s1">&#39;0&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="c1"># 0110100101100011011101000110011001111011011001010110111001100011001100000110010001101001011011100110011101011111011010010111001101011111011011100011000001110100010111110110010101101110011000110111001001111001011100000111010001101001001100000110111001011111001100010110001000110010011001010011000001100100001101000011001101111101</span>
<span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">2</span><span class="p">))[</span><span class="mi">2</span><span class="p">:])</span>
<span class="c1"># b&#39;ictf{enc0ding_is_n0t_encrypti0n_1b2e0d43}&#39;</span>
</code></pre></div>

<p>Thấy thú zị??? tham khảo thêm các writeup của Pymi tại <a href="https://github.com/pymivn/ctf">https://github.com/pymivn/ctf</a></p>
<p>Tham gia team <span class="caps">CTF</span> <span class="caps">PYMI</span> qua <a href="https://pymi-invite.fly.dev/">Slack pymi</a> #ctf&nbsp;nha</p>
<p>Đăng ký ngay tại <a href="https://pymi.vn">PyMI.vn</a> để học Python tại Hà Nội <span class="caps">TP</span> <span class="caps">HCM</span> (Sài Gòn),
trở thành lập trình viên #python chuyên nghiệp ngay sau khóa&nbsp;học.</p>
      </div>
      <div class="back-to-top">
          <a href="#top">back to top</a>
      </div>
    </article>
  </div>
<!-- end article -->
                <footer>
                    <div class="icons">
                        <a href="https://github.com/pymivn" target="_blank"><div class="icon-github icon"></div></a>
                    </div>
                    <p>© <script>document.write(moment().format('YYYY'));</script> Pymiers</p>
                </footer>
        </div>
</body>
</html>